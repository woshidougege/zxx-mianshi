<h2>ğŸ Pythonæµ‹è¯•åŸºç¡€</h2>

<h3>PythonåŸºç¡€è¯­æ³•</h3>

<div class="highlight-box">
    <h4>1. æ•°æ®ç±»å‹</h4>
    <pre><code># åˆ—è¡¨ List - å¯å˜
users = ['alice', 'bob', 'charlie']
users.append('david')  # æ·»åŠ 
users[0]  # è®¿é—®ï¼š'alice'
len(users)  # é•¿åº¦ï¼š4

# å­—å…¸ Dict - é”®å€¼å¯¹
user = {
    'name': 'test',
    'age': 25,
    'city': 'Beijing'
}
user['name']  # è®¿é—®ï¼š'test'
user['email'] = 'test@qq.com'  # æ·»åŠ 

# å…ƒç»„ Tuple - ä¸å¯å˜
coords = (10, 20)
x, y = coords  # è§£åŒ…

# é›†åˆ Set - å»é‡
tags = {'python', 'test', 'python'}  # è‡ªåŠ¨å»é‡
print(tags)  # {'python', 'test'}</code></pre>
</div>

<div class="highlight-box">
    <h4>2. æ§åˆ¶æµ</h4>
    <pre><code># if æ¡ä»¶åˆ¤æ–­
status_code = 200
if status_code == 200:
    print("æˆåŠŸ")
elif status_code == 404:
    print("æœªæ‰¾åˆ°")
else:
    print("å…¶ä»–é”™è¯¯")

# for å¾ªç¯
test_cases = ['case1', 'case2', 'case3']
for case in test_cases:
    print(f"æ‰§è¡Œæµ‹è¯•ï¼š{case}")

# while å¾ªç¯
retry_count = 0
while retry_count < 3:
    print(f"é‡è¯•ç¬¬{retry_count + 1}æ¬¡")
    retry_count += 1

# åˆ—è¡¨æ¨å¯¼å¼
numbers = [1, 2, 3, 4, 5]
squares = [x**2 for x in numbers]  # [1, 4, 9, 16, 25]
evens = [x for x in numbers if x % 2 == 0]  # [2, 4]</code></pre>
</div>

<div class="highlight-box">
    <h4>3. å‡½æ•°</h4>
    <pre><code># å®šä¹‰å‡½æ•°
def login(username, password):
    """ç”¨æˆ·ç™»å½•"""
    if username == 'test' and password == '123':
        return {'code': 0, 'msg': 'æˆåŠŸ'}
    return {'code': 1, 'msg': 'å¤±è´¥'}

# è°ƒç”¨å‡½æ•°
result = login('test', '123')
print(result)

# é»˜è®¤å‚æ•°
def request_api(url, method='GET', timeout=30):
    print(f"{method} {url} timeout={timeout}")

request_api('http://api.test.com')  # ä½¿ç”¨é»˜è®¤å€¼
request_api('http://api.test.com', 'POST', 60)  # æŒ‡å®šå‚æ•°

# å¯å˜å‚æ•°
def test_batch(*test_cases):
    for case in test_cases:
        print(f"æ‰§è¡Œï¼š{case}")

test_batch('case1', 'case2', 'case3')</code></pre>
</div>

<hr>

<h3>requestsåº“è¯¦è§£</h3>

<div class="tech-box">
    <h4>åŸºæœ¬è¯·æ±‚</h4>
    <pre><code>import requests

# GETè¯·æ±‚
response = requests.get('https://api.example.com/users')
print(response.status_code)  # 200
print(response.json())  # è§£æJSONå“åº”

# POSTè¯·æ±‚ - JSONæ ¼å¼
data = {
    'username': 'test',
    'password': '123456'
}
response = requests.post('https://api.example.com/login', json=data)

# POSTè¯·æ±‚ - è¡¨å•æ ¼å¼
data = {
    'username': 'test',
    'password': '123456'
}
response = requests.post('https://api.example.com/login', data=data)

# PUTè¯·æ±‚
data = {'name': 'new_name'}
response = requests.put('https://api.example.com/users/1', json=data)

# DELETEè¯·æ±‚
response = requests.delete('https://api.example.com/users/1')</code></pre>
</div>

<div class="tech-box">
    <h4>è¯·æ±‚å‚æ•°</h4>
    <pre><code># URLå‚æ•° (Query String)
params = {
    'page': 1,
    'size': 10,
    'keyword': 'test'
}
response = requests.get('https://api.example.com/search', params=params)
# å®é™…è¯·æ±‚ï¼šhttps://api.example.com/search?page=1&size=10&keyword=test

# Headers è¯·æ±‚å¤´
headers = {
    'Authorization': 'Bearer token_abc123',
    'Content-Type': 'application/json',
    'User-Agent': 'Test-Client/1.0'
}
response = requests.get('https://api.example.com/data', headers=headers)

# Cookies
cookies = {
    'session_id': 'abc123',
    'user_id': '12345'
}
response = requests.get('https://api.example.com/user', cookies=cookies)

# è¶…æ—¶è®¾ç½®
response = requests.get('https://api.example.com/data', timeout=10)  # 10ç§’è¶…æ—¶

# SSLè¯ä¹¦éªŒè¯
response = requests.get('https://api.example.com/data', verify=False)  # å¿½ç•¥è¯ä¹¦éªŒè¯</code></pre>
</div>

<div class="tech-box">
    <h4>å“åº”å¤„ç†</h4>
    <pre><code>response = requests.get('https://api.example.com/users/1')

# çŠ¶æ€ç 
print(response.status_code)  # 200

# å“åº”å¤´
print(response.headers)
print(response.headers['Content-Type'])

# å“åº”ä½“
print(response.text)  # æ–‡æœ¬æ ¼å¼
print(response.content)  # äºŒè¿›åˆ¶æ ¼å¼
print(response.json())  # JSONæ ¼å¼

# å“åº”æ—¶é—´
print(response.elapsed.total_seconds())  # å“åº”æ—¶é—´ï¼ˆç§’ï¼‰

# åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ
if response.status_code == 200:
    print("æˆåŠŸ")
else:
    print(f"å¤±è´¥ï¼š{response.status_code}")

# æˆ–è€…ä½¿ç”¨raise_for_status
try:
    response.raise_for_status()  # 4xxã€5xxä¼šæŠ›å¼‚å¸¸
    print("æˆåŠŸ")
except requests.HTTPError as e:
    print(f"HTTPé”™è¯¯ï¼š{e}")</code></pre>
</div>

<div class="tech-box">
    <h4>Sessionä¼šè¯ç®¡ç†</h4>
    <pre><code># ä½¿ç”¨Sessionä¿æŒä¼šè¯ï¼ˆè‡ªåŠ¨ç®¡ç†Cookieï¼‰
session = requests.Session()

# ç™»å½•
login_data = {
    'username': 'test',
    'password': '123456'
}
response = session.post('https://api.example.com/login', json=login_data)

# åç»­è¯·æ±‚è‡ªåŠ¨å¸¦ä¸ŠCookie
response = session.get('https://api.example.com/user/profile')
response = session.get('https://api.example.com/orders')

# è®¾ç½®é»˜è®¤headersï¼ˆæ‰€æœ‰è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šï¼‰
session.headers.update({
    'User-Agent': 'Test-Client/1.0',
    'Accept': 'application/json'
})

# å…³é—­Session
session.close()</code></pre>
</div>

<hr>

<h3>pytestæ¡†æ¶è¯¦è§£</h3>

<div class="example-box">
    <h4>æµ‹è¯•ç”¨ä¾‹ç»„ç»‡</h4>
    <pre><code># test_user.py
class TestUser:
    """ç”¨æˆ·ç›¸å…³æµ‹è¯•"""
    
    def test_get_user_info(self):
        """è·å–ç”¨æˆ·ä¿¡æ¯"""
        assert True
    
    def test_update_user_info(self):
        """æ›´æ–°ç”¨æˆ·ä¿¡æ¯"""
        assert True

class TestOrder:
    """è®¢å•ç›¸å…³æµ‹è¯•"""
    
    def test_create_order(self):
        """åˆ›å»ºè®¢å•"""
        assert True
    
    def test_cancel_order(self):
        """å–æ¶ˆè®¢å•"""
        assert True</code></pre>
</div>

<div class="example-box">
    <h4>æ–­è¨€æ–¹æ³•</h4>
    <pre><code># åŸºæœ¬æ–­è¨€
assert 1 + 1 == 2
assert 'test' in 'this is a test'
assert [1, 2, 3] == [1, 2, 3]

# å¼‚å¸¸æ–­è¨€
import pytest

def test_zero_division():
    with pytest.raises(ZeroDivisionError):
        1 / 0

def test_value_error():
    with pytest.raises(ValueError, match='invalid'):
        raise ValueError('invalid value')

# è¿‘ä¼¼å€¼æ–­è¨€
assert 0.1 + 0.2 == pytest.approx(0.3)

# è‡ªå®šä¹‰å¤±è´¥ä¿¡æ¯
assert response.status_code == 200, f"æœŸæœ›200ï¼Œå®é™…{response.status_code}"</code></pre>
</div>

<div class="example-box">
    <h4>pytestæ ‡è®°ï¼ˆmarkï¼‰</h4>
    <pre><code>import pytest

# è·³è¿‡æµ‹è¯•
@pytest.mark.skip(reason="åŠŸèƒ½æœªå¼€å‘")
def test_new_feature():
    pass

# æ¡ä»¶è·³è¿‡
@pytest.mark.skipif(sys.platform == "win32", reason="ä¸æ”¯æŒWindows")
def test_linux_only():
    pass

# é¢„æœŸå¤±è´¥
@pytest.mark.xfail
def test_known_bug():
    assert False

# è‡ªå®šä¹‰æ ‡è®°
@pytest.mark.smoke  # å†’çƒŸæµ‹è¯•
def test_login():
    pass

@pytest.mark.regression  # å›å½’æµ‹è¯•
def test_order_flow():
    pass

# è¿è¡ŒæŒ‡å®šæ ‡è®°çš„æµ‹è¯•
# pytest -m smoke
# pytest -m "smoke or regression"</code></pre>
</div>

<hr>

<h3>æ•°æ®åº“æ“ä½œ</h3>

<div class="tech-box">
    <h4>pymysql ä½¿ç”¨</h4>
    <pre><code>import pymysql

# è¿æ¥æ•°æ®åº“
conn = pymysql.connect(
    host='localhost',
    port=3306,
    user='root',
    password='123456',
    database='test_db',
    charset='utf8mb4'
)

# åˆ›å»ºæ¸¸æ ‡
cursor = conn.cursor()

# æŸ¥è¯¢æ•°æ®
sql = "SELECT * FROM users WHERE id = %s"
cursor.execute(sql, (1,))
result = cursor.fetchone()  # è·å–ä¸€æ¡
print(result)

results = cursor.fetchall()  # è·å–æ‰€æœ‰
for row in results:
    print(row)

# æ’å…¥æ•°æ®
sql = "INSERT INTO users (name, age) VALUES (%s, %s)"
cursor.execute(sql, ('test', 25))
conn.commit()  # æäº¤äº‹åŠ¡

# æ›´æ–°æ•°æ®
sql = "UPDATE users SET age = %s WHERE id = %s"
cursor.execute(sql, (26, 1))
conn.commit()

# åˆ é™¤æ•°æ®
sql = "DELETE FROM users WHERE id = %s"
cursor.execute(sql, (1,))
conn.commit()

# å…³é—­è¿æ¥
cursor.close()
conn.close()</code></pre>
</div>

<hr>

<h3>æ–‡ä»¶æ“ä½œ</h3>

<div class="tech-box">
    <h4>è¯»å†™æ–‡ä»¶</h4>
    <pre><code># è¯»å–æ–‡ä»¶
with open('test_data.txt', 'r', encoding='utf-8') as f:
    content = f.read()  # è¯»å–å…¨éƒ¨
    print(content)

with open('test_data.txt', 'r', encoding='utf-8') as f:
    lines = f.readlines()  # æŒ‰è¡Œè¯»å–
    for line in lines:
        print(line.strip())

# å†™å…¥æ–‡ä»¶
with open('output.txt', 'w', encoding='utf-8') as f:
    f.write('Hello World\n')
    f.write('æµ‹è¯•æ•°æ®\n')

# è¿½åŠ æ–‡ä»¶
with open('log.txt', 'a', encoding='utf-8') as f:
    f.write('æ–°çš„æ—¥å¿—\n')

# è¯»å†™JSON
import json

# è¯»å–JSON
with open('config.json', 'r', encoding='utf-8') as f:
    config = json.load(f)

# å†™å…¥JSON
data = {'name': 'test', 'age': 25}
with open('data.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)</code></pre>
</div>

<hr>

<h3>å¼‚å¸¸å¤„ç†</h3>

<div class="tech-box">
    <pre><code># try-except æ•è·å¼‚å¸¸
try:
    response = requests.get('https://api.example.com/data', timeout=5)
    response.raise_for_status()
    data = response.json()
except requests.Timeout:
    print("è¯·æ±‚è¶…æ—¶")
except requests.HTTPError as e:
    print(f"HTTPé”™è¯¯ï¼š{e}")
except requests.RequestException as e:
    print(f"è¯·æ±‚å¼‚å¸¸ï¼š{e}")
except Exception as e:
    print(f"æœªçŸ¥é”™è¯¯ï¼š{e}")
finally:
    print("æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ")

# ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸
def validate_age(age):
    if age < 0 or age > 120:
        raise ValueError(f"å¹´é¾„æ— æ•ˆï¼š{age}")
    return True

# è‡ªå®šä¹‰å¼‚å¸¸
class TestException(Exception):
    pass

def run_test():
    if not condition:
        raise TestException("æµ‹è¯•æ¡ä»¶ä¸æ»¡è¶³")</code></pre>
</div>

